As Theresa May’s most senior ministers filed out of the cabinet room on Wednesday evening to be offered a glass of wine after their five-hour meeting, there was a strange atmosphere. It did not feel like a time for celebration. The prime minister had stepped outside to tell the world her Brexit deal had been agreed after a “long, detailed and impassioned debate”. As her ministerial team sipped on their selection of red or white, however, there was another absence – one that hinted at the extraordinary events about to unfold. Dominic Raab, the Brexit secretary, had slipped off to see the chief whip, Julian Smith. Having expressed disquiet early on in the cabinet meeting, he was firmer with Smith – he’d been cut out of key decisions and wanted the chance to change the deal while there was still time. After he was knocked back, he informed Smith that he would quit. The emotional cabinet meeting had been bookended by two bizarre events. Before it began, a letter signed by 13 Scottish MPs – including David Mundell, May’s own Scottish secretary, whom she was about to face around the cabinet table – was delivered to No 10. It warned her about a “betrayal” over future fishing rights. At the end of the meeting, after ministers had been passed a copy of the statement May was about to read to the media, work and pensions secretary Esther McVey suddenly demanded a cabinet vote on May’s deal. Smith insisted no such vote was allowed, but McVey became increasingly agitated. Mark Sedwill, the cabinet secretary, calmly asked for a copy of the cabinet manual and read the relevant passage. No vote was held. May had shunned the usual practice of an opening and closing statement in favour of an extended question-and-answer session. There was a queue of complaints from about 10 ministers, particularly over concerns that the “backstop” designed to prevent a hard border in Ireland would keep the UK tethered to Brussels indefinitely. Moments of levity were welcome, but brief. Geoffrey Cox, the attorney general, theatrically compared the deal to a fragile raft, built out of oil drums and plastic, that had to survive the open seas. Caroline Nokes, the home office minister, joked that such rafts were usually dealt with in short order by the border force. Andrea Leadsom, the leader of the House, who had been trying to amend May’s Brexit plans for months, was wet-eyed as she explained how little support there was in the Commons. By the time May delivered her post-cabinet media comments, she knew her prediction of “difficult days ahead” was a colossal understatement. As attempts were made to keep Raab on board, May was hit with another blow. Arlene Foster, leader of the Northern Irish Democratic Unionist party, whose MPs prop up May’s minority government, left her in no doubt that she could not back the Brexit deal because it treated Northern Ireland differently. Suddenly May’s working majority had disappeared. On Thursday morning, Downing Street didn’t have to wait for Raab’s resignation announcement for the trouble to begin. Shailesh Vara, a Northern Ireland minister, helpfully kicked things off by resigning over the Brexit deal before 8am, just in time for peak morning radio audiences. Raab published his own damning resignation letter just after 9am. “No democratic nation has ever signed up to be bound by such an extensive regime, imposed externally without any democratic control,” he wrote. An hour later, with May’s team still reeling, McVey announced she was going, in a letter that came close to accusing the prime minister of lying to voters. She attacked May’s claim that “this deal honours the result of the referendum when it is obvious to everyone it doesn’t”. Her resignation was soon followed by that of Anne-Marie Trevelyan, a ministerial aide, and Suella Braverman, a junior Brexit minister. As the departures mounted, the plotting accelerated. On a WhatsApp group shared by members of the European Research Group (ERG), made up of committed Tory Brexiters, some were adamant that this was the moment to strike against May. Others were more cautious, wanting to keep the PM for now and vote down her deal in parliament. A meeting was arranged for later in the day. Inside Downing Street, there was little time to think about which minister might go next. May was having to prepare for a historic Commons statement that would see her subjected to hours of questioning from MPs on all sides. While everyone knew it would be a tough session, what transpired was so grim that it left cabinet ministers shocked and caused others to harden their resolve against the deal. On this historic matter, it was almost an hour before May received a supportive intervention. By then, any hopes of a Commons majority for the deal were in tatters. Jacob Rees-Mogg, the ERG’s chairman, wondered aloud whether he should write to the 1922 committee’s chairman – the keeper of Tory party rules – demanding a vote of no confidence in her leadership. Most devastating was the DUP’s Nigel Dodds, who said it would be a “waste of time” to list the broken promises she had made over Northern Ireland and said the deal would treat the region differently to the rest of the UK. In fact, MPs had been trying to warn No 10 of a lack of willing backers for days. With crucial details of the Irish backstop having leaked on Tuesday, a move against May’s deal had immediately begun. In parliament’s central lobby that evening, Rees-Mogg, former Tory leader Iain Duncan Smith, and Dodds were conducting interview after interview denouncing the document, which had not then even been published. A close ally of May texted a senior figure in No 10 to warn them. The answer that came back was not reassuring: “What do you think we should do?” Around midday on Thursday, after the prime minister had been at the dispatch box for 90 minutes, a cabinet minister emerged from the chamber and attempted to outline a route map that would get the country out of the woods. Halfway through he just threw his head back and his arms up, declaring: “God knows what is going to happen!” A move against May was now well under way. Members of the ERG gathered in committee room 10 in the depths of parliament to discuss their next step. Boris Johnson was among those to stride purposefully into the meeting. He was joined by Ranil Jayawardena, a Tory MP who had resigned as a ministerial aide moments earlier. While Rees-Mogg announced he would dispatch a letter demanding the no-confidence vote, others refused. Yet the quest to find the 48 MPs needed to trigger a vote by writing similar letters had begun. When Rees-Mogg announced his decision to a mob of reporters, a flurry of Tories followed suit. May’s team had another problem: a Gove problem. Back at Wednesday’s cabinet meeting, there had been such relief that Michael Gove had ultimately backed May that her team had misread the mood of the environment secretary and leading Leave campaigner. While he had concluded he would support her deal because of the dire consequences of a no-deal outcome, the thrust of his intervention revealed serious concerns about its details. On Thursday morning, with the prime minister facing a mounting disaster, he was asked to take Raab’s job as Brexit secretary. A meeting was fixed to see the prime minister that evening. As the day unfolded, Gove realised he had been wrong to tell cabinet there was a “slim chance” May’s deal could make it through the Commons. In fact, there was almost no chance. Gove entered No 10 unnoticed and gave the PM an ultimatum. Given her deal would not pass, as Brexit secretary he must be given the chance to go back to Brussels and improve the terms. May disagreed. Gove turned down the post. What her team had thought would be a straightforward chat turned into a tense stand-off, delaying the press conference she had called to shore up her position. Worse still, having been forced to confront his misgivings, Gove was no longer able to tell the PM that he could stay in the cabinet. He went home to talk to allies. By Friday morning there was relief at no early resignations and Downing Street began to restore some order. Whips had been recalled from their constituencies to head off a possible no-confidence vote. With no vote yet called by the chairman of the 1922 committee, Graham Brady, some in No 10 dared to believe the threat was receding. Morale was lifted further when Gove announced he would stay in his current post. The task at hand now for the prime minister’s aides was clear. “This is peak deal,” said one exasperated Downing Street official on Friday. “This is as good as it gets. It’s now our job to sell it.” May appeared on a radio phone-in before conducting an interview with the supportive Daily Mail. The reshuffle was used to firm up the government. Potentially problematic backbenchers Stephen Hammond and John Penrose were handed ministerial posts. Former home secretary Amber Rudd, who had proved good at making the pragmatic argument in favour of May’s deal, came back to cabinet. Steve Barclay, a Brexiter and junior health minister, was given a slimmed-down role as Brexit secretary. Yet as one storm eased, another was gathering. While No 10 had been fighting fires, the mood among cabinet ministers sceptical of the deal had hardened. A faction led by Leadsom and Gove vowed to workover the weekend and this week to come up with concrete demands for change. “Ultimately, there will be a decision to make when ministers vote on this deal,” said one cabinet source. “If you can’t vote for the deal, you can’t serve in the government.”