Iran has said it will decide in the next few weeks whether to pull out of the nuclear deal signed in 2015 and start enriching uranium capable of making a nuclear bomb. The announcement was made by Tehran as its officials met counterparts from France, Britain, Germany Russian and China in Vienna on Friday to assess how the deal can be kept alive in the face of the reimposition by the US of secondary sanctions designed to cripple any European firm continuing to do business with Iran. President  Trump withdrew from the deal despite strenuous European objections on 8 May, adding that old sanctions against contact with the Tehran regime would be reimposed. In the run-up to the Vienna meeting, Tehran officials said the EU would need to present a credible compensation package by the end of the month to make up for the loss of income to Iran caused by the US sanctions. Iran is increasingly sceptical that Europe has the means or will to set up an economic firewall that can assure European firms that they will be protected from US Treasury fines if they do business in Iran. Many of the firms trading with Iran, such as the French oil company Total, have substantial US interests and do not want to put those assets at risk to continue trading with Iran. The Vienna meeting being held in the joint commission format is the first such conference without the US, and is in some ways a test of Europe’s commercial and diplomatic ability to follow a foreign policy independent of Washington. Iran’s supreme leader, Ayatollah Khamenei this week said his country would stay in the deal on three strict conditions. He said the EU had to protect Iranian oil sales from US sanctions and continued to buy Iranian oil. He also demanded European banks safeguard trade with Iran, including by keeping the country inside the Swift international payments system. Finally, he also urged France, Germany and the UK not to seek a new agreement on Iran’s ballistic missile programme, or its regional activities, including its presence in Yemen, Iraq and Syria. Broadly, Russia and China agree with these terms. The US secretary of state, Mike Pompeo, on Monday outlined a counter set of demands before the country would rejoin the deal that the EU rejected as unrealistic and amounting to regime change in Tehran. The EU fears ever heavier economic sanctions will strengthen hardliners in Tehran, while the US believes a country-wide rebellion can be stoked among a population angry at the regime’s costly overseas military adventures. Speaking in St Petersburg, the French president, Emmanuel Macron, said the US approach to the deal was “not serious”, adding he was comforted by a report from the International Atomic Energy Agency confirming Iran was still abiding by the deal’s key restrictions on its nuclear facilities. He also said companies from France and other European countries should be given an opportunity to “keep their economic profit, despite the US sanctions, and maintain their economic presence in Iran”. Macron added: “Europe should have a stronger economic sovereignty. France envisages a compensation for French companies acting within the framework of treaties signed by France.” The EU is studying three plans to protect trade with Iran – a legally untested blocking statute that renders any US sanctions on EU companies null and void, euro-denominated finance for companies from the European Investment Bank, and an EU equivalent to the US Treasury’s secondary sanctions regime. Macron also said he wanted Iran to complete the nuclear deal by signing a new framework agreement to cover ballistic missiles and its regional activities. He revealed he had spoken to Tehran on the need to agree on what follows the end of the agreement in 2025. It is not clear what the EU will do if Iran pushes back on this plan. The Russian president, Vladimir Putin, counselled against anything that resembled reopening the deal, and warned of the lamentable consequences if the deal collapsed. There is intense anger in some European capitals, notably Paris, at the unilateral tone of the US approach, especially the reimposition of sanctions. The premise of the nuclear deal – officially called the Joint Comprehensive Plan of Action was to let Iran rejoin the global economy in exchange for denuclearisation. The only EU country so far to support the US withdrawal from the deal is Poland. The most effective weapon in the US economic armoury is to slash Iranian oil exports by isolating Iran’s central bank from the global banking system. About 37% of Iran’s oil exports go to European destinations, and overall the EU is Iran’s number one trading partner. The value of trade between the EU and Iran soared from $9.2bn (£6.9bn) in 2015 to $25bn in 2017.